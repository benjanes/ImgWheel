(function(e){e.fn.ImgWheel=function(t){var n=e.extend({animateSpeedMax:500,animateSpeedMin:2e3,delayMax:500,delayMin:2e3,imgPlacement:"center",displayWidth:"100%",direction:"",articleWidth:"100%",articleAlignment:"center",functionality:""},t);return this.each(function(){function A(){if(C[E]!==""){s.eq(E).unwrap()}if(C[S]!==""){s.eq(S).wrap('<a href="'+C[S]+'"></a>')}u.eq(E).hide();u.eq(S).show();s.eq(E).animate({width:k[E]*(3/5)+"px",height:h*(3/5)+"px",left:c*(17/20)-k[E]*(3/5)/2+"px",top:w,"z-index":0},animateInterval).removeClass("onlyCentral").addClass("everythingBut");s.eq(S).animate({width:k[S]+"px",height:h+"px",left:c/2-k[S]/2+"px",top:"0px","z-index":15},animateInterval).removeClass("everythingBut").addClass("onlyCentral");s.eq(x).animate({width:"0px",height:"0px",left:"0px",top:b},0).animate({width:k[x]*(3/5)+"px",height:h*(3/5)+"px",left:c*(3/20)-k[x]*(3/5)/2+"px",top:w},animateInterval);s.eq(T).animate({width:"0px",height:"0px",left:"0px",top:b},animateInterval);s.eq(N).animate({width:"0px",height:"0px",left:c+"px",top:b},animateInterval);if(E===o-1){E=0}else{E++}if(S===o-1){S=0}else{S++}if(x===o-1){x=0}else{x++}if(T===o-1){T=0}else{T++}if(N===o-1){N=0}else{N++}}function O(){if(C[E]!==""){s.eq(E).unwrap()}if(C[N]!==""){s.eq(N).wrap('<a href="'+C[N]+'"></a>')}u.eq(E).hide();u.eq(N).show();s.eq(E).animate({width:k[E]*(3/5)+"px",height:h*(3/5)+"px",left:c*(3/20)-k[E]*(3/5)/2+"px",top:w,"z-index":0},animateInterval).removeClass("onlyCentral").addClass("everythingBut");s.eq(S).animate({width:"0px",height:"0px",left:"0px",top:b},animateInterval);s.eq(x).animate({width:"0px",height:"0px",left:c+"px",top:b},animateInterval);s.eq(T).animate({width:"0px",height:"0px",left:c+"px",top:b},0).animate({width:k[T]*(3/5)+"px",height:h*(3/5)+"px",left:c*(17/20)-k[T]*(3/5)/2+"px",top:w},animateInterval);s.eq(N).animate({width:k[N]+"px",height:h+"px",left:c/2-k[N]/2+"px",top:"0px","z-index":15},animateInterval).removeClass("everythingBut").addClass("onlyCentral");if(E===0){E=o-1}else{E--}if(S===0){S=o-1}else{S--}if(x===0){x=o-1}else{x--}if(T===0){T=o-1}else{T--}if(N===0){N=o-1}else{N--}}function M(){counterclockwise_timeout=setTimeout(function(){A()},200)}function _(){clockwise_timeout=setTimeout(function(){O()},200)}function D(){if(n.direction==="reverse"){animateInterval=(1-rel_x/range)*(n.animateSpeedMin-n.animateSpeedMax)+n.animateSpeedMax;delay=(1-rel_x/range)*(n.delayMin-n.delayMax)+n.delayMax}else{if(n.direction===""){animateInterval=rel_x/range*(n.animateSpeedMin-n.animateSpeedMax)+n.animateSpeedMax;delay=rel_x/range*(n.delayMin-n.delayMax)+n.delayMax}}M();left_timeout=setTimeout(function(){D()},delay)}function P(){if(n.direction==="reverse"){animateInterval=rel_x/range*(n.animateSpeedMin-n.animateSpeedMax)+n.animateSpeedMax;delay=rel_x/range*(n.delayMin-n.delayMax)+n.delayMax}else{if(n.direction===""){animateInterval=(1-rel_x/range)*(n.animateSpeedMin-n.animateSpeedMax)+n.animateSpeedMax;delay=(1-rel_x/range)*(n.delayMin-n.delayMax)+n.delayMax}}_();right_timeout=setTimeout(function(){P()},delay)}function H(){animateInterval=n.animateSpeedMax;if(n.direction==="reverse"){O()}else{A()}setTimeout(function(){$left_arrow.one("click",H)},animateInterval)}function B(){animateInterval=n.animateSpeedMax;if(n.direction==="reverse"){A()}else{O()}setTimeout(function(){$right_arrow.one("click",B)},animateInterval)}function j(){c=t.width();r.css({width:c+"px",height:c/4+"px"});h=parseInt(r.css("height"),10);i.css("top",h+"px");a.add(f).css({width:1/3*c+"px",height:h+"px"});k=[];for(var o=0;o<s.length;o++){k.push(L[o]*h)}if(n.imgPlacement==="top"){b="0px";w="0px"}else{if(n.imgPlacement==="bottom"){b=h+"px";w=h*(2/5)+"px"}else{b=h/2+"px";w=h*(1/5)+"px"}}s.css({width:"0px",height:"0px",left:"0px",top:b});s.eq(N).css({width:k[N]*(3/5)+"px",height:h*(3/5)+"px",left:c*(17/20)-k[N]*(3/5)/2+"px",top:w});s.eq(E).addClass("onlyCentral").css({width:"auto",height:h+"px",left:c/2-k[E]/2+"px",top:"0px","z-index":15});s.eq(S).css({width:k[S]*(3/5)+"px",height:h*(3/5)+"px",left:c*(3/20)-k[S]*(3/5)/2+"px",top:w});i.css({position:"absolute",top:h+"px",width:n.articleWidth});p=parseInt(i.css("width"),10);d=[];u.each(function(){var t=e(this).innerHeight();d.push(t)});v=[];l.each(function(){e(this).css({top:h+"px"});var t=e(this).height();v.push(t)});m=d.concat(v);g=Math.max.apply(Math,m);t.css({height:h+g+"px"});if(n.articleAlignment==="left"){y="0px"}else{if(n.articleAlignment==="right"){y=c-p+"px"}else{y=c/2-p/2+"px"}}i.css("left",y)}var t=e(this);t.css({position:"relative"});var r=e(this).children(".image-container");var i=e(this).children(".article-container");var s=r.find("img");var o=s.length;var u=i.find("article");r.append('<div class="left-ImgWheel-scroll"></div><div class="right-ImgWheel-scroll"></div>');var a=r.children(".left-ImgWheel-scroll");var f=r.children(".right-ImgWheel-scroll");var l=t.children("div:not(.image-container, .article-container)");if(n.functionality==="click"){if(n.direction===""){a.append('<div class="left-arrow">&#9664;</div>');f.append('<div class="right-arrow">&#9654;</div>')}if(n.direction==="reverse"){a.append('<div class="right-arrow">&#9654;</div>');f.append('<div class="left-arrow">&#9664;</div>')}}if(n.functionality==="click"){$left_arrow=e(".left-arrow");$right_arrow=e(".right-arrow");$left_arrow.add($right_arrow).hide().css({position:"absolute",color:"white","text-shadow":"1px 1px 5px black, 1px -1px 5px black, -1px -1px 5px black, -1px 1px 5px black",cursor:"pointer"})}if(n.direction==="reverse"){a.css({position:"absolute",top:"0",right:"0","z-index":"20"});f.css({position:"absolute",top:"0",left:"0","z-index":"20"})}else{a.css({position:"absolute",top:"0",left:"0","z-index":"20"});f.css({position:"absolute",top:"0",right:"0","z-index":"20"})}t.css("width",n.displayWidth);var c=t.width();r.css({width:c+"px",height:c/4+"px",position:"relative"});var h=parseInt(r.css("height"),10);a.add(f).css({width:1/3*c+"px",height:h+"px"});i.css({position:"absolute",top:h+"px",width:n.articleWidth});var p=parseInt(i.css("width"),10);var d=[];u.each(function(){var t=e(this).height();d.push(t)});var v=[];l.each(function(){e(this).css({top:h+"px"});var t=e(this).height();v.push(t)});var m=d.concat(v);var g=Math.max.apply(Math,m);t.css({height:h+g+"px"});if(n.articleAlignment==="left"){var y="0px"}else{if(n.articleAlignment==="right"){y=c-p+"px"}else{y=c/2-p/2+"px"}}i.css("left",y);u.hide();if(n.imgPlacement==="top"){var b="0px";var w="0px";if(n.functionality==="click"){$left_arrow.css({bottom:"5px",left:"5px"});$right_arrow.css({bottom:"5px",right:"5px"})}}else{if(n.imgPlacement==="bottom"){var b=h+"px";var w=h*(2/5)+"px";if(n.functionality==="click"){$left_arrow.css({top:"5px",left:"5px"});$right_arrow.css({top:"5px",right:"5px"})}}else{var b=h/2+"px";var w=h*(1/5)+"px";if(n.functionality==="click"){$left_arrow.css({bottom:"5px",left:"5px"});$right_arrow.css({bottom:"5px",right:"5px"})}}}s.css("position","absolute").hide();var E=0;var S=1;var x=2;var T=o-2;var N=o-1;var C=[];s.each(function(){if(e(this).parent().is("a")){href=e(this).parent().attr("href");e(this).unwrap()}else{href=""}C.push(href)});if(C[E]!==""){s.eq(E).wrap('<a href="'+C[E]+'"></a>')}var k=[];var L=[];s.load(function(){k=[];L=[];s.each(function(){var t=new Image;t.src=e(this).attr("src");var n=t.width;var r=t.height;L.push(n/r)});for(var t=0;t<s.length;t++){k.push(L[t]*h)}s.css({width:"0px",height:"0px",left:"0px",top:b});s.eq(N).css({width:k[N]*(3/5)+"px",height:h*(3/5)+"px",left:c*(17/20)-k[N]*(3/5)/2+"px",top:w});s.eq(E).addClass("onlyCentral").css({width:"auto",height:h+"px",left:c/2-k[E]/2+"px",top:"0px","z-index":15});s.eq(S).css({width:k[S]*(3/5)+"px",height:h*(3/5)+"px",left:c*(3/20)-k[S]*(3/5)/2+"px",top:w});s.not(s.eq(E)).addClass("everythingBut");u.eq(E).show();e(window).load(function(){s.show()})});if(n.functionality==="click"){r.hover(function(){$left_arrow.add($right_arrow).fadeIn(100)},function(){$left_arrow.add($right_arrow).fadeOut(100)});$left_arrow.one("click",H);$right_arrow.one("click",B)}else{if(n.functionality===""){f.bind("touchstart mouseover",function(t){this_position=e(this).offset();rel_x=t.pageX-this_position.left;range=e(this).width();e(this).mousemove(function(t){this_position=e(this).offset();rel_x=t.pageX-this_position.left;range=e(this).width()});P()});f.bind("touchend mouseout",function(e){clearTimeout(clockwise_timeout);clearTimeout(right_timeout);e.preventDefault()});a.bind("touchstart mouseover",function(t){this_position=e(this).offset();rel_x=t.pageX-this_position.left;range=e(this).width();e(this).mousemove(function(t){this_position=e(this).offset();rel_x=t.pageX-this_position.left;range=e(this).width()});D()});a.bind("touchend mouseout",function(e){clearTimeout(counterclockwise_timeout);clearTimeout(left_timeout);e.preventDefault()})}}var F;e(window).resize(function(){clearTimeout(F);F=setTimeout(j,25)})})}})(jQuery)