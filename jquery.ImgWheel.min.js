(function(e){e.fn.ImgWheel=function(t){var n=e.extend({animateSpeed:500,delay:1e3,imgPlacement:"center",displayWidth:"100%",direction:"",articleWidth:"100%",articleAlignment:"center",functionality:""},t);return this.each(function(){function D(){c=t.width();r.css({width:c+"px",height:c/4+"px"});h=parseInt(r.css("height"),10);i.css("top",h+"px");a.add(f).css({width:1/4*c+"px",height:h+"px"});A=[];for(var o=0;o<s.length;o++){A.push(O[o]*h)}if(n.imgPlacement==="top"){b="0px";w="0px"}else{if(n.imgPlacement==="bottom"){b=h+"px";w=h*(2/5)+"px"}else{b=h/2+"px";w=h*(1/5)+"px"}}s.css({width:"0px",height:"0px",left:"0px",top:b});s.eq(N).css({width:A[N]*(3/5)+"px",height:h*(3/5)+"px",left:c*(17/20)-A[N]*(3/5)/2+"px",top:w});s.eq(E).addClass("onlyCentral").css({width:"auto",height:h+"px",left:c/2-A[E]/2+"px",top:"0px","z-index":15});s.eq(S).css({width:A[S]*(3/5)+"px",height:h*(3/5)+"px",left:c*(3/20)-A[S]*(3/5)/2+"px",top:w});i.css({position:"absolute",top:h+"px",width:n.articleWidth});p=parseInt(i.css("width"),10);d=[];u.each(function(){var t=e(this).innerHeight();d.push(t)});v=[];l.each(function(){e(this).css({top:h+"px"});var t=e(this).height();v.push(t)});m=d.concat(v);g=Math.max.apply(Math,m);t.css({height:h+g+"px"});if(n.articleAlignment==="left"){y="0px"}else{if(n.articleAlignment==="right"){y=c-p+"px"}else{y=c/2-p/2+"px"}}i.css("left",y)}var t=e(this);t.css({position:"relative"});var r=e(this).children(".image-container");var i=e(this).children(".article-container");var s=r.find("img");var o=s.length;var u=i.find("article");r.append('<div class="left-ImgWheel-scroll"></div><div class="right-ImgWheel-scroll"></div>');var a=r.children(".left-ImgWheel-scroll");var f=r.children(".right-ImgWheel-scroll");var l=t.children("div:not(.image-container, .article-container)");if(n.functionality==="click"){if(n.direction===""){a.append('<div class="left-arrow">&#9664;</div>');f.append('<div class="right-arrow">&#9654;</div>')}if(n.direction==="reverse"){a.append('<div class="right-arrow">&#9654;</div>');f.append('<div class="left-arrow">&#9664;</div>')}}if(n.functionality==="click"){$left_arrow=e(".left-arrow");$right_arrow=e(".right-arrow");$left_arrow.add($right_arrow).hide().css({position:"absolute",color:"white","text-shadow":"1px 1px 5px black, 1px -1px 5px black, -1px -1px 5px black, -1px 1px 5px black",cursor:"pointer"})}if(n.direction==="reverse"){a.css({position:"absolute",top:"0",right:"0","z-index":"20"});f.css({position:"absolute",top:"0",left:"0","z-index":"20"})}else{a.css({position:"absolute",top:"0",left:"0","z-index":"20"});f.css({position:"absolute",top:"0",right:"0","z-index":"20"})}t.css("width",n.displayWidth);var c=t.width();r.css({width:c+"px",height:c/4+"px",position:"relative"});var h=parseInt(r.css("height"),10);a.add(f).css({width:1/4*c+"px",height:h+"px"});i.css({position:"absolute",top:h+"px",width:n.articleWidth});var p=parseInt(i.css("width"),10);var d=[];u.each(function(){var t=e(this).height();d.push(t)});var v=[];l.each(function(){e(this).css({top:h+"px"});var t=e(this).height();v.push(t)});var m=d.concat(v);var g=Math.max.apply(Math,m);t.css({height:h+g+"px"});if(n.articleAlignment==="left"){var y="0px"}else{if(n.articleAlignment==="right"){y=c-p+"px"}else{y=c/2-p/2+"px"}}i.css("left",y);u.hide();if(n.imgPlacement==="top"){var b="0px";var w="0px";if(n.functionality==="click"){$left_arrow.css({bottom:"5px",left:"5px"});$right_arrow.css({bottom:"5px",right:"5px"})}}else{if(n.imgPlacement==="bottom"){var b=h+"px";var w=h*(2/5)+"px";if(n.functionality==="click"){$left_arrow.css({top:"5px",left:"5px"});$right_arrow.css({top:"5px",right:"5px"})}}else{var b=h/2+"px";var w=h*(1/5)+"px";if(n.functionality==="click"){$left_arrow.css({bottom:"5px",left:"5px"});$right_arrow.css({bottom:"5px",right:"5px"})}}}s.css("position","absolute").hide();var E=0;var S=1;var x=2;var T=o-2;var N=o-1;var C=n.animateSpeed;var k=n.delay;var L=[];s.each(function(){if(e(this).parent().is("a")){href=e(this).parent().attr("href");e(this).unwrap()}else{href=""}L.push(href)});if(L[E]!==""){s.eq(E).wrap('<a href="'+L[E]+'"></a>')}var A=[];var O=[];s.load(function(){A=[];O=[];s.each(function(){var t=new Image;t.src=e(this).attr("src");var n=t.width;var r=t.height;O.push(n/r)});for(var t=0;t<s.length;t++){A.push(O[t]*h)}s.css({width:"0px",height:"0px",left:"0px",top:b});s.eq(N).css({width:A[N]*(3/5)+"px",height:h*(3/5)+"px",left:c*(17/20)-A[N]*(3/5)/2+"px",top:w});s.eq(E).addClass("onlyCentral").css({width:"auto",height:h+"px",left:c/2-A[E]/2+"px",top:"0px","z-index":15});s.eq(S).css({width:A[S]*(3/5)+"px",height:h*(3/5)+"px",left:c*(3/20)-A[S]*(3/5)/2+"px",top:w});s.not(s.eq(E)).addClass("everythingBut");u.eq(E).show();e(window).load(function(){s.show()})});var M=function(){if(L[E]!==""){s.eq(E).unwrap()}if(L[S]!==""){s.eq(S).wrap('<a href="'+L[S]+'"></a>')}u.eq(E).hide();u.eq(S).show();s.eq(E).stop().animate({width:A[E]*(3/5)+"px",height:h*(3/5)+"px",left:c*(17/20)-A[E]*(3/5)/2+"px",top:w,"z-index":0},C).removeClass("onlyCentral").addClass("everythingBut");s.eq(S).stop().animate({width:A[S]+"px",height:h+"px",left:c/2-A[S]/2+"px",top:"0px","z-index":15},C).removeClass("everythingBut").addClass("onlyCentral");s.eq(x).stop().animate({width:"0px",height:"0px",left:"0px",top:b},0).animate({width:A[x]*(3/5)+"px",height:h*(3/5)+"px",left:c*(3/20)-A[x]*(3/5)/2+"px",top:w},C);s.eq(T).stop().animate({width:"0px",height:"0px",left:"0px",top:b},C);s.eq(N).stop().animate({width:"0px",height:"0px",left:c+"px",top:b},C);if(E===o-1){E=0}else{E++}if(S===o-1){S=0}else{S++}if(x===o-1){x=0}else{x++}if(T===o-1){T=0}else{T++}if(N===o-1){N=0}else{N++}};var _=function(){if(L[E]!==""){s.eq(E).unwrap()}if(L[N]!==""){s.eq(N).wrap('<a href="'+L[N]+'"></a>')}u.eq(E).hide();u.eq(N).show();s.eq(E).stop().animate({width:A[E]*(3/5)+"px",height:h*(3/5)+"px",left:c*(3/20)-A[E]*(3/5)/2+"px",top:w,"z-index":0},C).removeClass("onlyCentral").addClass("everythingBut");s.eq(S).stop().animate({width:"0px",height:"0px",left:"0px",top:b},C);s.eq(x).stop().animate({width:"0px",height:"0px",left:c+"px",top:b},C);s.eq(T).stop().animate({width:"0px",height:"0px",left:c+"px",top:b},0).animate({width:A[T]*(3/5)+"px",height:h*(3/5)+"px",left:c*(17/20)-A[T]*(3/5)/2+"px",top:w},C);s.eq(N).stop().animate({width:A[N]+"px",height:h+"px",left:c/2-A[N]/2+"px",top:"0px","z-index":15},C).removeClass("everythingBut").addClass("onlyCentral");if(E===0){E=o-1}else{E--}if(S===0){S=o-1}else{S--}if(x===0){x=o-1}else{x--}if(T===0){T=o-1}else{T--}if(N===0){N=o-1}else{N--}};if(n.functionality==="click"){r.hover(function(){$left_arrow.add($right_arrow).fadeIn(100)},function(){$left_arrow.add($right_arrow).fadeOut(100)});$left_arrow.click(function(){if(n.direction==="reverse"){_()}else{M()}});$right_arrow.click(function(){if(n.direction==="reverse"){M()}else{_()}})}if(n.functionality===""){a.bind("touchstart mouseover",function(e){M();loop_on_left=setInterval(M,k);e.preventDefault()});a.bind("touchend mouseout",function(e){clearInterval(loop_on_left);e.preventDefault()});if(n.functionality===""){f.bind("touchstart mouseover",function(e){_();loop_on_right=setInterval(_,k);e.preventDefault()});f.bind("touchend mouseout",function(e){clearInterval(loop_on_right);e.preventDefault()})}}var P;e(window).resize(function(){clearTimeout(P);P=setTimeout(D,25)})})}})(jQuery)