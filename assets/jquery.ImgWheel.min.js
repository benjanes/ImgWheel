/*! ImgWheel - v0.2.1 - 2014-08-14
* http://www.benjanes.com/ImgWheel
* Copyright (c) 2014 Ben Janes; Licensed MIT */
!function(a){a.fn.ImgWheel=function(b){var c=a.extend({animateSpeedMax:500,animateSpeedMin:2e3,delayMax:500,delayMin:2e3,imgPlacement:"center",displayWidth:"100%",direction:"",articleWidth:"100%",articleAlignment:"center",functionality:""},b);return this.each(function(){function b(){""!==L[G]&&o.eq(G).unwrap(),""!==L[H]&&o.eq(H).wrap('<a href="'+L[H]+'"></a>'),q.eq(G).hide(),q.eq(H).show(),o.eq(G).animate({width:.6*M[G]+"px",height:.6*x+"px",left:.85*w-.6*M[G]/2+"px",top:F,"z-index":0},animateInterval).removeClass("onlyCentral").addClass("everythingBut"),o.eq(H).animate({width:M[H]+"px",height:x+"px",left:w/2-M[H]/2+"px",top:"0px","z-index":15},animateInterval).removeClass("everythingBut").addClass("onlyCentral"),o.eq(I).animate({width:"0px",height:"0px",left:"0px",top:E},0).animate({width:.6*M[I]+"px",height:.6*x+"px",left:.15*w-.6*M[I]/2+"px",top:F},animateInterval),o.eq(J).animate({width:"0px",height:"0px",left:"0px",top:E},animateInterval),o.eq(K).animate({width:"0px",height:"0px",left:w+"px",top:E},animateInterval),G===p-1?G=0:G++,H===p-1?H=0:H++,I===p-1?I=0:I++,J===p-1?J=0:J++,K===p-1?K=0:K++}function d(){""!==L[G]&&o.eq(G).unwrap(),""!==L[K]&&o.eq(K).wrap('<a href="'+L[K]+'"></a>'),q.eq(G).hide(),q.eq(K).show(),o.eq(G).animate({width:.6*M[G]+"px",height:.6*x+"px",left:.15*w-.6*M[G]/2+"px",top:F,"z-index":0},animateInterval).removeClass("onlyCentral").addClass("everythingBut"),o.eq(H).animate({width:"0px",height:"0px",left:"0px",top:E},animateInterval),o.eq(I).animate({width:"0px",height:"0px",left:w+"px",top:E},animateInterval),o.eq(J).animate({width:"0px",height:"0px",left:w+"px",top:E},0).animate({width:.6*M[J]+"px",height:.6*x+"px",left:.85*w-.6*M[J]/2+"px",top:F},animateInterval),o.eq(K).animate({width:M[K]+"px",height:x+"px",left:w/2-M[K]/2+"px",top:"0px","z-index":15},animateInterval).removeClass("everythingBut").addClass("onlyCentral"),0===G?G=p-1:G--,0===H?H=p-1:H--,0===I?I=p-1:I--,0===J?J=p-1:J--,0===K?K=p-1:K--}function e(){counterclockwise_timeout=setTimeout(function(){b()},300)}function f(){clockwise_timeout=setTimeout(function(){d()},300)}function g(){"reverse"===c.direction?(animateInterval=(1-rel_x/range)*(c.animateSpeedMin-c.animateSpeedMax)+c.animateSpeedMax,delay=(1-rel_x/range)*(c.delayMin-c.delayMax)+c.delayMax):""===c.direction&&(animateInterval=rel_x/range*(c.animateSpeedMin-c.animateSpeedMax)+c.animateSpeedMax,delay=rel_x/range*(c.delayMin-c.delayMax)+c.delayMax),e(),left_timeout=setTimeout(function(){g()},delay)}function h(){"reverse"===c.direction?(animateInterval=rel_x/range*(c.animateSpeedMin-c.animateSpeedMax)+c.animateSpeedMax,delay=rel_x/range*(c.delayMin-c.delayMax)+c.delayMax):""===c.direction&&(animateInterval=(1-rel_x/range)*(c.animateSpeedMin-c.animateSpeedMax)+c.animateSpeedMax,delay=(1-rel_x/range)*(c.delayMin-c.delayMax)+c.delayMax),f(),right_timeout=setTimeout(function(){h()},delay)}function i(){animateInterval=c.animateSpeedMax,"reverse"===c.direction?d():b(),setTimeout(function(){u.one("click",i)},animateInterval)}function j(){animateInterval=c.animateSpeedMax,"reverse"===c.direction?b():d(),setTimeout(function(){v.one("click",j)},animateInterval)}function k(){w=l.width(),m.css({width:w+"px",height:w/4+"px"}),x=parseInt(m.css("height"),10),n.css("top",x+"px"),r.add(s).css({width:1/3*w+"px",height:x+"px"}),M=[];for(var b=0;b<o.length;b++)M.push(N[b]*x);"top"===c.imgPlacement?(E="0px",F="0px"):"bottom"===c.imgPlacement?(E=x+"px",F=.4*x+"px"):(E=x/2+"px",F=.2*x+"px"),o.css({width:"0px",height:"0px",left:"0px",top:E}),o.eq(K).css({width:.6*M[K]+"px",height:.6*x+"px",left:.85*w-.6*M[K]/2+"px",top:F}),o.eq(G).addClass("onlyCentral").css({width:"auto",height:x+"px",left:w/2-M[G]/2+"px",top:"0px","z-index":15}),o.eq(H).css({width:.6*M[H]+"px",height:.6*x+"px",left:.15*w-.6*M[H]/2+"px",top:F}),n.css({position:"absolute",top:x+"px",width:c.articleWidth}),y=parseInt(n.css("width"),10),z=[],q.each(function(){var b=a(this).innerHeight();z.push(b)}),A=[],t.each(function(){a(this).css({top:x+"px"});var b=a(this).height();A.push(b)}),B=z.concat(A),C=Math.max.apply(Math,B),l.css({height:x+C+"px"}),D="left"===c.articleAlignment?"0px":"right"===c.articleAlignment?w-y+"px":w/2-y/2+"px",n.css("left",D)}var l=a(this);l.css("position","relative");var m=a(this).children(".image-container"),n=a(this).children(".article-container"),o=m.find("img"),p=o.length,q=n.find("article");m.append('<div class="left-ImgWheel-scroll"></div><div class="right-ImgWheel-scroll"></div>');var r=m.children(".left-ImgWheel-scroll"),s=m.children(".right-ImgWheel-scroll"),t=l.children("div:not(.image-container, .article-container)");if("click"===c.functionality&&(""===c.direction&&(r.append('<div class="left-arrow">&#9664;</div>'),s.append('<div class="right-arrow">&#9654;</div>')),"reverse"===c.direction&&(r.append('<div class="right-arrow">&#9654;</div>'),s.append('<div class="left-arrow">&#9664;</div>'))),"click"===c.functionality){var u=m.find(".left-arrow"),v=m.find(".right-arrow");u.add(v).hide().css({position:"absolute",color:"white","text-shadow":"1px 1px 5px black, 1px -1px 5px black, -1px -1px 5px black, -1px 1px 5px black",cursor:"pointer"}),m.hover(function(){u.add(v).fadeIn(100)},function(){u.add(v).fadeOut(100)})}"reverse"===c.direction?(r.css({position:"absolute",top:"0",right:"0","z-index":"20"}),s.css({position:"absolute",top:"0",left:"0","z-index":"20"})):(r.css({position:"absolute",top:"0",left:"0","z-index":"20"}),s.css({position:"absolute",top:"0",right:"0","z-index":"20"})),l.css("width",c.displayWidth);var w=l.width();m.css({width:w+"px",height:w/4+"px",position:"relative"});var x=parseInt(m.css("height"),10);r.add(s).css({width:1/3*w+"px",height:x+"px"}),n.css({position:"absolute",top:x+"px",width:c.articleWidth});var y=parseInt(n.css("width"),10),z=[];q.each(function(){var b=a(this).height();z.push(b)});var A=[];t.each(function(){a(this).css({top:x+"px"});var b=a(this).height();A.push(b)});var B=z.concat(A),C=Math.max.apply(Math,B);if(l.css({height:x+C+"px"}),"left"===c.articleAlignment)var D="0px";else D="right"===c.articleAlignment?w-y+"px":w/2-y/2+"px";if(n.css("left",D),q.hide(),"top"===c.imgPlacement){var E="0px",F="0px";"click"===c.functionality&&(u.css({bottom:"5px",left:"5px"}),v.css({bottom:"5px",right:"5px"}))}else if("bottom"===c.imgPlacement){var E=x+"px",F=.4*x+"px";"click"===c.functionality&&(u.css({top:"5px",left:"5px"}),v.css({top:"5px",right:"5px"}))}else{var E=x/2+"px",F=.2*x+"px";"click"===c.functionality&&(u.css({bottom:"5px",left:"5px"}),v.css({bottom:"5px",right:"5px"}))}o.css("position","absolute").hide();var G=0,H=1,I=2,J=p-2,K=p-1,L=[];o.each(function(){a(this).parent().is("a")?(href=a(this).parent().attr("href"),a(this).unwrap()):href="",L.push(href),a(this).attr("src",a(this).attr("src"))}),""!==L[G]&&o.eq(G).wrap('<a href="'+L[G]+'"></a>');var M=[],N=[];o.load(function(){M=[],N=[],o.each(function(){var b=new Image;b.src=a(this).attr("src");var c=b.width,d=b.height;N.push(c/d)});for(var b=0;p>b;b++)M.push(N[b]*x);o.css({width:"0px",height:"0px",left:"0px",top:E}),o.eq(K).css({width:.6*M[K]+"px",height:.6*x+"px",left:.85*w-.6*M[K]/2+"px",top:F}),o.eq(G).addClass("onlyCentral").css({width:"auto",height:x+"px",left:w/2-M[G]/2+"px",top:"0px","z-index":15}),o.eq(H).css({width:.6*M[H]+"px",height:.6*x+"px",left:.15*w-.6*M[H]/2+"px",top:F}),o.not(o.eq(G)).addClass("everythingBut"),q.eq(G).show(),o.show()}),"click"===c.functionality?(u.one("click",i),v.one("click",j)):""===c.functionality&&(s.bind("touchstart mouseover",function(b){this_position=a(this).offset(),rel_x=b.pageX-this_position.left,range=a(this).width(),a(this).mousemove(function(b){this_position=a(this).offset(),rel_x=b.pageX-this_position.left,range=a(this).width()}),h()}),s.bind("touchend mouseout",function(a){clearTimeout(clockwise_timeout),clearTimeout(right_timeout),a.preventDefault()}),r.bind("touchstart mouseover",function(b){this_position=a(this).offset(),rel_x=b.pageX-this_position.left,range=a(this).width(),a(this).mousemove(function(b){this_position=a(this).offset(),rel_x=b.pageX-this_position.left,range=a(this).width()}),g()}),r.bind("touchend mouseout",function(a){clearTimeout(counterclockwise_timeout),clearTimeout(left_timeout),a.preventDefault()}));var O;a(window).resize(function(){clearTimeout(O),O=setTimeout(k,25)})})}}(jQuery);